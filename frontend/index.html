<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Writing Agent</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Marked.js for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">‚úçÔ∏è</span>
                    <span class="logo-text">Blog Writer</span>
                </div>
            </div>

            <div class="sidebar-content">
                <!-- Generate Form -->
                <div class="generate-section">
                    <h3>Generate New Blog</h3>
                    <form id="generate-form">
                        <div class="form-group">
                            <label for="topic">Topic</label>
                            <textarea id="topic" placeholder="Enter your blog topic..." rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="as-of-date">As-of Date</label>
                            <input type="date" id="as-of-date">
                        </div>
                        <button type="submit" class="btn-primary" id="generate-btn">
                            <span class="btn-icon">üöÄ</span>
                            <span class="btn-text">Generate Blog</span>
                        </button>
                    </form>
                </div>

                <div class="divider"></div>

                <!-- Past Blogs -->
                <div class="past-blogs-section">
                    <h3>Past Blogs</h3>
                    <div id="past-blogs-list" class="past-blogs-list">
                        <p class="empty-state">No saved blogs found</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Loading Overlay -->
            <div id="loading-overlay" class="loading-overlay hidden">
                <div class="loading-card">
                    <div class="spinner"></div>
                    <h3>Generating Blog...</h3>
                    <p id="loading-status">Initializing...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Welcome State -->
            <div id="welcome-state" class="welcome-state">
                <div class="welcome-card">
                    <div class="welcome-icon">üìù</div>
                    <h1>Welcome to Blog Writing Agent</h1>
                    <p>Enter a topic in the sidebar and click "Generate Blog" to create an AI-powered blog post.</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üîç</span>
                            <span>Smart Research</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìä</span>
                            <span>Structured Plans</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ú®</span>
                            <span>Quality Content</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üì•</span>
                            <span>Download Ready</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Result State -->
            <div id="result-state" class="result-state hidden">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="plan">
                        <span class="tab-icon">üß©</span>
                        <span>Plan</span>
                    </button>
                    <button class="tab" data-tab="evidence">
                        <span class="tab-icon">üîé</span>
                        <span>Evidence</span>
                    </button>
                    <button class="tab" data-tab="preview">
                        <span class="tab-icon">üìù</span>
                        <span>Preview</span>
                    </button>
                    <button class="tab" data-tab="download">
                        <span class="tab-icon">üì•</span>
                        <span>Download</span>
                    </button>
                </div>

                <!-- Tab Contents -->
                <div class="tab-content">
                    <!-- Plan Tab -->
                    <div id="tab-plan" class="tab-pane active">
                        <div class="plan-header">
                            <h2 id="plan-title">Blog Title</h2>
                            <div class="plan-meta">
                                <span class="meta-item">
                                    <span class="meta-label">Audience:</span>
                                    <span id="plan-audience">-</span>
                                </span>
                                <span class="meta-item">
                                    <span class="meta-label">Tone:</span>
                                    <span id="plan-tone">-</span>
                                </span>
                                <span class="meta-item">
                                    <span class="meta-label">Kind:</span>
                                    <span id="plan-kind" class="badge">-</span>
                                </span>
                                <span class="meta-item">
                                    <span class="meta-label">Mode:</span>
                                    <span id="plan-mode" class="badge badge-mode">-</span>
                                </span>
                            </div>
                        </div>
                        <div class="tasks-grid" id="tasks-grid">
                            <!-- Tasks will be inserted here -->
                        </div>
                    </div>

                    <!-- Evidence Tab -->
                    <div id="tab-evidence" class="tab-pane hidden">
                        <h2>Research Evidence</h2>
                        <div id="evidence-container">
                            <p class="empty-state">No evidence collected (closed-book mode or no API key)</p>
                        </div>
                    </div>

                    <!-- Preview Tab -->
                    <div id="tab-preview" class="tab-pane hidden">
                        <div class="preview-container">
                            <div id="markdown-preview" class="markdown-body">
                                <!-- Rendered markdown will appear here -->
                            </div>
                        </div>
                    </div>

                    <!-- Download Tab -->
                    <div id="tab-download" class="tab-pane hidden">
                        <h2>Download Options</h2>
                        <div class="download-options">
                            <button class="download-card" id="download-md">
                                <span class="download-icon">üìÑ</span>
                                <span class="download-title">Download Markdown</span>
                                <span class="download-desc">Get the raw .md file</span>
                            </button>
                            <button class="download-card" id="copy-md">
                                <span class="download-icon">üìã</span>
                                <span class="download-title">Copy to Clipboard</span>
                                <span class="download-desc">Copy markdown content</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error State -->
            <div id="error-state" class="error-state hidden">
                <div class="error-card">
                    <div class="error-icon">‚ùå</div>
                    <h2>Generation Failed</h2>
                    <p id="error-message">An error occurred while generating the blog.</p>
                    <button class="btn-primary" onclick="hideError()">Try Again</button>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>